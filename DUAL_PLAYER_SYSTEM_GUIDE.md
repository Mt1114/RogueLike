# 双角色系统使用指南

## 概述

双角色系统允许玩家同时控制两个不同的角色：忍者蛙和神秘剑士。每个角色都有独特的技能和控制方式。

## 角色特性

### 忍者蛙（左侧角色）
- **功能**：只能发光，不能攻击
- **移动控制**：WASD键
- **光源控制**：鼠标移动控制光源方向
- **特殊能力**：提供光照，帮助神秘剑士在黑暗中战斗

### 神秘剑士（右侧角色）
- **功能**：只能攻击，不能发光
- **移动控制**：方向键（↑↓←→）
- **攻击控制**：
  - 数字键盘2486：上、下、左、右方向攻击
  - 鼠标左键：远程攻击
  - 鼠标右键：近战攻击
- **特殊能力**：拥有武器系统，可以攻击敌人

## 距离限制

两个角色不能离得太远，系统会自动限制他们的距离：
- 最大距离：屏幕对角线长度
- 当距离超过限制时，系统会自动调整角色位置
- 这确保了相机能够同时显示两个角色

## 控制说明

### 忍者蛙控制
```
W - 向上移动
A - 向左移动
S - 向下移动
D - 向右移动
鼠标移动 - 控制光源方向
```

### 神秘剑士控制
```
↑ - 向上移动
↓ - 向下移动
← - 向左移动
→ - 向右移动
数字键盘8 - 向上攻击
数字键盘2 - 向下攻击
数字键盘4 - 向左攻击
数字键盘6 - 向右攻击
鼠标左键 - 远程攻击
鼠标右键 - 近战攻击
```

## 游戏机制

### 经验值和金币
- 击杀敌人时，两个角色都会获得经验值和金币
- 升级时，两个角色都会获得升级机会

### 生命值
- 两个角色都有独立的生命值
- 只有两个角色都死亡时，游戏才会结束

### 物品拾取
- 两个角色都可以拾取物品（生命补给、弹药补给等）
- 钥匙收集由神秘剑士负责

### 光照系统
- 光照由忍者蛙提供
- 光源跟随忍者蛙的位置
- 鼠标控制光源的照射方向

## 测试方法

### 运行简单测试
```bash
python test_simple_dual_player.py
```

### 运行完整测试
```bash
python test_dual_player_system.py
```

## 技术实现

### 核心文件
- `src/modules/dual_player_system.py` - 双角色系统主类
- `src/modules/game.py` - 游戏主类（已集成双角色系统）
- `src/modules/components/weapon_manager.py` - 武器管理器（支持禁用武器）

### 主要功能
1. **独立控制**：两个角色使用不同的按键进行控制
2. **距离限制**：自动限制两个角色之间的距离
3. **角色分工**：忍者蛙负责光照，神秘剑士负责战斗
4. **相机跟随**：相机跟随两个角色的中心位置
5. **碰撞检测**：支持两个角色与敌人的独立碰撞检测

### 兼容性
- 双角色系统与现有的单角色系统完全兼容
- 可以通过设置 `dual_player_system` 为 `None` 来切换回单角色模式
- 所有现有的游戏功能（升级、物品、敌人等）都支持双角色模式

## 注意事项

1. **性能考虑**：双角色系统会增加一些计算开销，但影响很小
2. **平衡性**：两个角色的分工确保了游戏的平衡性
3. **学习曲线**：玩家需要同时控制两个角色，可能需要一些时间来适应
4. **策略性**：玩家需要合理分配两个角色的位置和行动

## 未来扩展

1. **更多角色**：可以扩展到支持更多角色
2. **角色切换**：允许玩家在游戏中选择不同的角色组合
3. **特殊技能**：为每个角色添加更多独特的技能
4. **合作机制**：添加角色之间的合作技能 